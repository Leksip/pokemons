<div class="pokemon-form">
  <h1 class="pokemon-form__title">
    {{tagId === 'new' ? 'Создание' : 'Редактирование'}} покемона
  </h1>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">

    <tui-input formControlName="name">
      Название*
      <input
        tuiTextfield
        type="text"
      />
    </tui-input>
    <div class="error" *ngIf="form.get('name')?.invalid && form.get('name')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input formControlName="height">
      Рост*
      <input
        tuiTextfield
        type="number"
      />
    </tui-input>
    <div class="error" *ngIf="form.get('height')?.invalid && form.get('height')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input formControlName="weight">
      Вес*
      <input
        tuiTextfield
        type="text"
      />
    </tui-input>
    <div class="error" *ngIf="form.get('weight')?.invalid && form.get('weight')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="level">
      Уровень*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('level')?.invalid && form.get('level')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="hp">
      Здоровье*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('hp')?.invalid && form.get('hp')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="attack">
      Урон*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('attack')?.invalid && form.get('attack')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="defend">
      Защита*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('defend')?.invalid && form.get('defend')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="stamina">
      Выносливость*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('stamina')?.invalid && form.get('stamina')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input-count formControlName="spd">
      Скорость*
      <input tuiTextfield/>
    </tui-input-count>
    <div class="error" *ngIf="form.get('spd')?.invalid && form.get('spd')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-input formControlName="description">
      Описание*
      <input
        tuiTextfield
        type="text"
      />
    </tui-input>
    <div class="error" *ngIf="form.get('description')?.invalid && form.get('description')?.touched">
      <small class="error__info">
        Поле обязательное для ввода
      </small>
    </div>

    <tui-multi-select
      [stringify]="stringify"
      placeholder="Ignored text"
      class="b-form"
      formControlName="tags"
      [editable]="false"
    >
      Список тэгов
      <tui-data-list-wrapper
        *tuiDataList
        [items]="tags"
        [itemContent]="itemContent"
      ></tui-data-list-wrapper>
    </tui-multi-select>
    <div class="error" *ngIf="form.get('tags')?.invalid && form.get('tags')?.touched">
      <small class="error__info">
        Необходимо добавить хотя бы один тэг
      </small>
    </div>
    <ng-template
      #itemContent
      let-tag
    >
      <div class="template">
        {{ tag.name }}
      </div>
    </ng-template>

    <div formArrayName="abilities">
      <button type="button" (click)="addSkill()">
        Добавить умение *
      </button>
      <div *ngFor="let abilities of skill.controls; let idx = index">
        <tui-input [formControlName] ="idx">
          Умение{{idx + 1}}*
          <input
            tuiTextfield
            type="text"

          />
        </tui-input>
        <button (click)="deleteSkill(idx)">Удалить</button>
        <div class="error" *ngIf="form.get('abilities')?.invalid && form.get('abilities')?.touched">
          <small class="error__info">
            Необхожимо добавить хотя бы одно умение
          </small>
        </div>
      </div>
    </div>

    <button
      tuiButton
      type="submit"
      [disabled]="form.invalid"
      [showLoader] = isSaving
    >
      {{tagId === 'new' ? 'Создать' : 'Редактировать'}}
    </button>
    <!--    <button (click)="test()">TEST</button>-->
  </form>
</div>
